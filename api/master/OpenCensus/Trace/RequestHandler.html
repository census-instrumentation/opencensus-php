<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="robots" content="index, follow, all" />
    <title>OpenCensus\Trace\RequestHandler | OpenCensus PHP API</title>

            <link rel="stylesheet" type="text/css" href="../../css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="../../css/bootstrap-theme.min.css">
        <link rel="stylesheet" type="text/css" href="../../css/sami.css">
        <script src="../../js/jquery-1.11.1.min.js"></script>
        <script src="../../js/bootstrap.min.js"></script>
        <script src="../../js/typeahead.min.js"></script>
        <script src="../../sami.js"></script>
        <meta name="MobileOptimized" content="width">
        <meta name="HandheldFriendly" content="true">
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    
    
    </head>

    <body id="class" data-name="class:OpenCensus_Trace_RequestHandler" data-root-path="../../">
            <div id="content">
        <div id="left-column">
                <div id="control-panel">
                    <form action="#" method="GET">
                <select id="version-switcher" name="version">
                                            <option value="../../../v0.2.3/index.html" data-version="v0.2.3">v0.2.3</option>
                                            <option value="../../../v0.3.0/index.html" data-version="v0.3.0">v0.3.0</option>
                                            <option value="../../../v0.4.0/index.html" data-version="v0.4.0">v0.4.0</option>
                                            <option value="../../../v0.4.1/index.html" data-version="v0.4.1">v0.4.1</option>
                                            <option value="../../../v0.4.2/index.html" data-version="v0.4.2">v0.4.2</option>
                                            <option value="../../../v0.4.3/index.html" data-version="v0.4.3">v0.4.3</option>
                                            <option value="../../../v0.5.0/index.html" data-version="v0.5.0">v0.5.0</option>
                                            <option value="../../../v0.5.1/index.html" data-version="v0.5.1">v0.5.1</option>
                                            <option value="../../../v0.5.2/index.html" data-version="v0.5.2">v0.5.2</option>
                                            <option value="../../../master/index.html" data-version="master">master branch</option>
                                    </select>
            </form>
                <script>
            $('option[data-version="'+window.projectVersion+'"]').prop('selected', true);
        </script>
        <form id="search-form" action="../../search.html" method="GET">
            <span class="glyphicon glyphicon-search"></span>
            <input name="search"
                   class="typeahead form-control"
                   type="search"
                   placeholder="Search">
        </form>
    </div>

                <div id="api-tree"></div>

        </div>
        <div id="right-column">
                <nav id="site-nav" class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-elements">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../../index.html">OpenCensus PHP API</a>
            </div>
            <div class="collapse navbar-collapse" id="navbar-elements">
                <ul class="nav navbar-nav">
                    <li><a href="../../classes.html">Classes</a></li>
                                            <li><a href="../../namespaces.html">Namespaces</a></li>
                                        <li><a href="../../interfaces.html">Interfaces</a></li>
                    <li><a href="../../traits.html">Traits</a></li>
                    <li><a href="../../doc-index.html">Index</a></li>
                    <li><a href="../../search.html">Search</a></li>
                </ul>
            </div>
        </div>
    </nav>

                        <div class="namespace-breadcrumbs">
            <ol class="breadcrumb">
                <li><span class="label label-default">class</span></li>
                        <li><a href="../../OpenCensus.html">OpenCensus</a></li><li class="backslash">\</li><li><a href="../../OpenCensus/Trace.html">Trace</a></li><li class="backslash">\</li><li>RequestHandler</li>
            </ol>
        </div>
                <div id="page-content">
                
    <div class="page-header">
        <h1>
            RequestHandler
                
        </h1>
    </div>

    <p>    class
    <strong>RequestHandler</strong>
</p>

        
    

            <div class="description">
            <p>This class manages the logic for sampling and reporting a trace within a
single request. It is not meant to be used directly -- instead, it should
be managed by the Tracer as its singleton instance.</p>                                </div>
    
    
            <h2>Constants</h2>

            <table class="table table-condensed">
                    <tr>
                <td>DEFAULT_ROOT_SPAN_NAME</td>
                <td class="last">
                    <p><em></em></p>
                    <p></p>
                </td>
            </tr>
                    <tr>
                <td>ATTRIBUTE_MAP</td>
                <td class="last">
                    <p><em></em></p>
                    <p></p>
                </td>
            </tr>
            </table>

    
    
            <h2>Methods</h2>

            <div class="container-fluid underlined">
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method___construct">__construct</a>(<a href="../../OpenCensus/Trace/Exporter/ExporterInterface.html"><abbr title="OpenCensus\Trace\Exporter\ExporterInterface">ExporterInterface</abbr></a> $exporter, <a href="../../OpenCensus/Trace/Sampler/SamplerInterface.html"><abbr title="OpenCensus\Trace\Sampler\SamplerInterface">SamplerInterface</abbr></a> $sampler, <a href="../../OpenCensus/Trace/Propagator/PropagatorInterface.html"><abbr title="OpenCensus\Trace\Propagator\PropagatorInterface">PropagatorInterface</abbr></a> $propagator, array $options = [])
        
                                            <p>Create a new RequestHandler.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_onExit">onExit</a>()
        
                                            <p>The function registered as the shutdown function. Cleans up the trace and
reports using the provided ExporterInterface. Adds additional attributes to
the root span detected from the response.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    <a href="../../OpenCensus/Trace/Tracer/TracerInterface.html"><abbr title="OpenCensus\Trace\Tracer\TracerInterface">TracerInterface</abbr></a>
                </div>
                <div class="col-md-8 type">
                    <a href="#method_tracer">tracer</a>()
        
                                            <p>Return the tracer used for this request.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    mixed
                </div>
                <div class="col-md-8 type">
                    <a href="#method_inSpan">inSpan</a>(array $spanOptions, callable $callable, array $arguments = [])
        
                                            <p>Instrument a callable by creating a Span that manages the startTime
and endTime. If an exception is thrown while executing the callable, the
exception will be caught, the span will be closed, and the exception will
be re-thrown.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    <a href="../../OpenCensus/Trace/Span.html"><abbr title="OpenCensus\Trace\Span">Span</abbr></a>
                </div>
                <div class="col-md-8 type">
                    <a href="#method_startSpan">startSpan</a>(array $spanOptions = [])
        
                                            <p>Explicitly start a new Span. You will need to manage finishing the Span,
including handling any thrown exceptions.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    <a href="../../OpenCensus/Core/Scope.html"><abbr title="OpenCensus\Core\Scope">Scope</abbr></a>
                </div>
                <div class="col-md-8 type">
                    <a href="#method_withSpan">withSpan</a>(<a href="../../OpenCensus/Trace/Span.html"><abbr title="OpenCensus\Trace\Span">Span</abbr></a> $span)
        
                                            <p>Attaches the provided span as the current span and returns a Scope
object which must be closed.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_addAttribute">addAttribute</a>(string $attribute, string $value, array $options = [])
        
                                            <p>Add an attribute to the provided Span</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_addAnnotation">addAnnotation</a>(string $description, array $options = [])
        
                                            <p>Add an annotation to the provided Span</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_addLink">addLink</a>(string $traceId, string $spanId, array $options = [])
        
                                            <p>Add a link to the provided Span</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_addMessageEvent">addMessageEvent</a>(string $type, string $id, array $options)
        
                                            <p>Add an message event to the provided Span</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_addCommonRequestAttributes">addCommonRequestAttributes</a>(array $headers)
        
                                            <p class="no-description">No description</p>
                                    </div>
                <div class="col-md-2"></div>
            </div>
            </div>


        <h2>Details</h2>

            <div id="method-details">
                    <div class="method-item">
                    <h3 id="method___construct">
        <div class="location">at         line 87</div>
        <code>                    
    <strong>__construct</strong>(<a href="../../OpenCensus/Trace/Exporter/ExporterInterface.html"><abbr title="OpenCensus\Trace\Exporter\ExporterInterface">ExporterInterface</abbr></a> $exporter, <a href="../../OpenCensus/Trace/Sampler/SamplerInterface.html"><abbr title="OpenCensus\Trace\Sampler\SamplerInterface">SamplerInterface</abbr></a> $sampler, <a href="../../OpenCensus/Trace/Propagator/PropagatorInterface.html"><abbr title="OpenCensus\Trace\Propagator\PropagatorInterface">PropagatorInterface</abbr></a> $propagator, array $options = [])
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Create a new RequestHandler.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><a href="../../OpenCensus/Trace/Exporter/ExporterInterface.html"><abbr title="OpenCensus\Trace\Exporter\ExporterInterface">ExporterInterface</abbr></a></td>
                <td>$exporter</td>
                <td>How to report the trace at the end of the request</td>
            </tr>
                    <tr>
                <td><a href="../../OpenCensus/Trace/Sampler/SamplerInterface.html"><abbr title="OpenCensus\Trace\Sampler\SamplerInterface">SamplerInterface</abbr></a></td>
                <td>$sampler</td>
                <td>Which sampler to use for sampling requests</td>
            </tr>
                    <tr>
                <td><a href="../../OpenCensus/Trace/Propagator/PropagatorInterface.html"><abbr title="OpenCensus\Trace\Propagator\PropagatorInterface">PropagatorInterface</abbr></a></td>
                <td>$propagator</td>
                <td>SpanContext propagator</td>
            </tr>
                    <tr>
                <td>array</td>
                <td>$options</td>
                <td>[optional] {
     Configuration options. See
     <a href="Span.html#method___construct">OpenCensus\Trace\Span::__construct()</a>
     for the other available options.</p>

<pre><code> @type array $headers Optional array of headers to use in place of $_SERVER
 @type bool $skipReporting If true, skips registering of onExit handler.
</code></pre>

<p>}</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_onExit">
        <div class="location">at         line 135</div>
        <code>                    
    <strong>onExit</strong>()
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>The function registered as the shutdown function. Cleans up the trace and
reports using the provided ExporterInterface. Adds additional attributes to
the root span detected from the response.</p>                                                </div>
                <div class="tags">
            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_tracer">
        <div class="location">at         line 149</div>
        <code>                    <a href="../../OpenCensus/Trace/Tracer/TracerInterface.html"><abbr title="OpenCensus\Trace\Tracer\TracerInterface">TracerInterface</abbr></a>
    <strong>tracer</strong>()
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Return the tracer used for this request.</p>                                                </div>
                <div class="tags">
            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td><a href="../../OpenCensus/Trace/Tracer/TracerInterface.html"><abbr title="OpenCensus\Trace\Tracer\TracerInterface">TracerInterface</abbr></a></td>
            <td></td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_inSpan">
        <div class="location">at         line 165</div>
        <code>                    mixed
    <strong>inSpan</strong>(array $spanOptions, callable $callable, array $arguments = [])
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Instrument a callable by creating a Span that manages the startTime
and endTime. If an exception is thrown while executing the callable, the
exception will be caught, the span will be closed, and the exception will
be re-thrown.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>array</td>
                <td>$spanOptions</td>
                <td></td>
            </tr>
                    <tr>
                <td>callable</td>
                <td>$callable</td>
                <td></td>
            </tr>
                    <tr>
                <td>array</td>
                <td>$arguments</td>
                <td></td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>mixed</td>
            <td>Returns whatever the callable returns</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_startSpan">
        <div class="location">at         line 178</div>
        <code>                    <a href="../../OpenCensus/Trace/Span.html"><abbr title="OpenCensus\Trace\Span">Span</abbr></a>
    <strong>startSpan</strong>(array $spanOptions = [])
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Explicitly start a new Span. You will need to manage finishing the Span,
including handling any thrown exceptions.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>array</td>
                <td>$spanOptions</td>
                <td>[optional] Options for the span. See
       <a href="Span.html#method___construct">OpenCensus\Trace\Span::__construct()</a></td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td><a href="../../OpenCensus/Trace/Span.html"><abbr title="OpenCensus\Trace\Span">Span</abbr></a></td>
            <td></td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_withSpan">
        <div class="location">at         line 190</div>
        <code>                    <a href="../../OpenCensus/Core/Scope.html"><abbr title="OpenCensus\Core\Scope">Scope</abbr></a>
    <strong>withSpan</strong>(<a href="../../OpenCensus/Trace/Span.html"><abbr title="OpenCensus\Trace\Span">Span</abbr></a> $span)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Attaches the provided span as the current span and returns a Scope
object which must be closed.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><a href="../../OpenCensus/Trace/Span.html"><abbr title="OpenCensus\Trace\Span">Span</abbr></a></td>
                <td>$span</td>
                <td></td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td><a href="../../OpenCensus/Core/Scope.html"><abbr title="OpenCensus\Core\Scope">Scope</abbr></a></td>
            <td></td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_addAttribute">
        <div class="location">at         line 204</div>
        <code>                    
    <strong>addAttribute</strong>(string $attribute, string $value, array $options = [])
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Add an attribute to the provided Span</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$attribute</td>
                <td></td>
            </tr>
                    <tr>
                <td>string</td>
                <td>$value</td>
                <td></td>
            </tr>
                    <tr>
                <td>array</td>
                <td>$options</td>
                <td>[optional] Configuration options.</p>

<pre><code> @type Span $span The span to add the attribute to.
</code></pre>
</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_addAnnotation">
        <div class="location">at         line 219</div>
        <code>                    
    <strong>addAnnotation</strong>(string $description, array $options = [])
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Add an annotation to the provided Span</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$description</td>
                <td></td>
            </tr>
                    <tr>
                <td>array</td>
                <td>$options</td>
                <td>[optional] Configuration options.</p>

<pre><code> @type Span $span The span to add the annotation to.
 @type array $attributes Attributes for this annotation.
 @type \DateTimeInterface|int|float $time The time of this event.
</code></pre>
</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_addLink">
        <div class="location">at         line 237</div>
        <code>                    
    <strong>addLink</strong>(string $traceId, string $spanId, array $options = [])
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Add a link to the provided Span</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$traceId</td>
                <td></td>
            </tr>
                    <tr>
                <td>string</td>
                <td>$spanId</td>
                <td></td>
            </tr>
                    <tr>
                <td>array</td>
                <td>$options</td>
                <td>[optional] Configuration options.</p>

<pre><code> @type Span $span The span to add the link to.
 @type string $type The relationship of the current span relative to
       the linked span: child, parent, or unspecified.
 @type array $attributes Attributes for this annotation.
 @type \DateTimeInterface|int|float $time The time of this event.
</code></pre>
</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_addMessageEvent">
        <div class="location">at         line 257</div>
        <code>                    
    <strong>addMessageEvent</strong>(string $type, string $id, array $options)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Add an message event to the provided Span</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$type</td>
                <td></td>
            </tr>
                    <tr>
                <td>string</td>
                <td>$id</td>
                <td></td>
            </tr>
                    <tr>
                <td>array</td>
                <td>$options</td>
                <td>[optional] Configuration options.</p>

<pre><code> @type Span $span The span to add the message event to.
 @type int $uncompressedSize The number of uncompressed bytes sent or
       received.
 @type int $compressedSize The number of compressed bytes sent or
       received. If missing assumed to be the same size as
       uncompressed.
 @type \DateTimeInterface|int|float $time The time of this event.
</code></pre>
</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_addCommonRequestAttributes">
        <div class="location">at         line 262</div>
        <code>                    
    <strong>addCommonRequestAttributes</strong>(array $headers)
        </code>
    </h3>
    <div class="details">
            
    

                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>array</td>
                <td>$headers</td>
                <td></td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
            </div>

    
            </div>
                <div id="footer">
        Generated by <a href="http://sami.sensiolabs.org/">Sami, the API Documentation Generator</a>.
    </div>

        </div>
    </div>
    </body>

</html>
